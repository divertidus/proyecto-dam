<!-- vista-entreno.component.html -->
<ion-list class="exercise-list-custom">
  <ion-item *ngFor="let ejercicio of ejercicios; let i = index" lines="none">
    <!-- Título del ejercicio y progreso -->
    <ion-card (click)="toggleEjercicio(i)" class="exercise-card-custom">
      <ion-card-header>
        <ion-card-title class="exercise-header">
          <span class="exercise-title">{{ ejercicio.nombreEjercicio }}</span>
          <span class="progress-indicator">{{ ejercicio.seriesCompletadas }} / {{ ejercicio.seriesTotal }}</span>
        </ion-card-title>
      </ion-card-header>
      <!-- Series progresivas -->
      <ion-card-content *ngIf="ejercicio.abierto">
        <div class="series-container">
          <div class="series-row" *ngFor="let serie of ejercicio.seriesReal; let j = index"
            [hidden]="j > ejercicio.seriesCompletadas">
            <span class="series-number">{{ j + 1 }}.</span>
            <ion-input type="number" [(ngModel)]="serie.repeticiones" class="reps-input" placeholder="10"></ion-input>
            <ion-input type="number" [(ngModel)]="serie.peso" class="weight-input" placeholder="Peso"></ion-input>
            <ion-button (click)="marcarSerieCompletada(i, j)" size="small">OK</ion-button>
          </div>
        </div>
      </ion-card-content>
    </ion-card>
  </ion-item>


  <!-- Footer con el progreso general y botón de guardar -->

</ion-list>
<ion-footer class="ion-padding">
  <div class="footer-info">
    Ejercicios completados {{ ejerciciosCompletados }} de {{ totalEjercicios }}
  </div>
  <ion-button expand="block" [disabled]="ejerciciosCompletados <= 0" (click)="guardarEntrenamiento()" color="primary">
    Guardar Entrenamiento
  </ion-button>
</ion-footer>